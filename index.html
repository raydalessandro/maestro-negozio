<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maestro di Negozio</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <div class="container">
        <!-- Logo Branding in alto a sinistra -->
        <div class="brand-signature">
            <div class="brand-logo">
                <svg width="50" height="50" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="16" cy="16" r="15.5" fill="none" stroke="#d4af37" stroke-width="0.1" opacity="0.1"/>
                  <path d="M16 16 Q16 14, 14 14 T10 14 Q10 18, 14 18 T22 18 Q22 10, 14 10 T6 10 Q6 22, 18 22 T30 22 Q30 6, 14 6" 
                        stroke="#d4af37" 
                        stroke-width="1.5" 
                        fill="none"
                        stroke-linecap="round"
                        opacity="0.9"/>
                  <animateTransform
                    attributeName="transform"
                    attributeType="XML"
                    type="rotate"
                    from="0 16 16"
                    to="5 16 16"
                    dur="4s"
                    values="0 16 16; 5 16 16; 0 16 16"
                    keyTimes="0; 0.5; 1"
                    repeatCount="indefinite"/>
                  <animate
                    attributeName="opacity"
                    values="0.9; 1; 0.9"
                    dur="4s"
                    repeatCount="indefinite"/>
                </svg>
            </div>
            <div class="brand-name">
                <div class="brand-by">by</div>
                <div class="brand-title">EAR LAB</div>
            </div>
        </div>
    <div class="landing-page">
        <div class="header">
            <h1>üèÜ Maestro di Negozio</h1>
            <p class="subtitle">Sistema di Monitoraggio e Gamification</p>
        </div>

        <div class="role-selector">
            <div class="role-card" onclick="goToManager()">
                <div class="role-icon">üë®‚Äçüíº</div>
                <h2>Manager</h2>
                <p>Accesso completo al sistema di monitoraggio</p>
                <button class="btn btn-primary">Accedi</button>
            </div>

            <div class="role-card" onclick="goToTeam()">
                <div class="role-icon">üèÜ</div>
                <h2>Team</h2>
                <p>Visualizza la classifica e i tuoi progressi</p>
                <button class="btn btn-secondary">Accedi</button>
            </div>
        </div>

        <div class="footer">
            <p>Made with ‚ù§Ô∏è for store excellence</p>
        </div>
    </div>
</div>

<!-- Carica script nell'ordine corretto -->
<script src="assets/js/config.js"></script>
<script src="assets/js/github-storage.js"></script>
<script src="assets/js/data.js"></script>
<script src="assets/js/ui.js"></script>

<script>
    function showLoading(message = 'Caricamento...') {
        const loader = document.createElement('div');
        loader.id = 'app-loader';
        loader.innerHTML = `
            <div style="
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.8);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 9999;
                backdrop-filter: blur(5px);
            ">
                <div style="
                    background: rgba(255, 255, 255, 0.15);
                    backdrop-filter: blur(10px);
                    padding: 40px;
                    border-radius: 20px;
                    text-align: center;
                    border: 2px solid rgba(255, 255, 255, 0.2);
                ">
                    <div style="font-size: 3em; margin-bottom: 20px;">‚è≥</div>
                    <div style="font-size: 1.2em; color: white;">${message}</div>
                </div>
            </div>
        `;
        document.body.appendChild(loader);
    }

    function hideLoading() {
        const loader = document.getElementById('app-loader');
        if (loader) loader.remove();
    }

    function goToManager() {
        // Chiedi password
        const password = prompt('üîê Inserisci password Manager:');
        
        if (password === 'oakself') {
            // Password corretta - salva in sessionStorage
            sessionStorage.setItem('managerAuth', 'true');
            window.location.href = 'manager.html';
        } else if (password !== null) {
            // Password sbagliata (null = annulla)
            alert('‚ùå Password errata!');
        }
    }

    function goToTeam() {
        window.location.href = 'team.html';
    }

    // Inizializza app quando il DOM √® pronto
    document.addEventListener('DOMContentLoaded', async function() {
        showLoading('Inizializzazione...');
        
        try {
            // Inizializza GitHub sync
            if (window.githubSync) {
                await window.githubSync.init();
                console.log('‚úÖ GitHub sync inizializzato');
            } else {
                throw new Error('GitHub sync non disponibile');
            }
            
            hideLoading();
            
        } catch (error) {
            hideLoading();
            
            // Mostra errore ma permetti comunque di procedere
            console.error('‚ö†Ô∏è Errore inizializzazione:', error);
            
            // Alert solo se errore critico
            if (error.message.includes('GitHub sync non disponibile')) {
                alert(
                    '‚ö†Ô∏è Attenzione\n\n' +
                    'Impossibile connettersi al sistema di salvataggio.\n' +
                    'Verifica la connessione internet.\n\n' +
                    'Puoi comunque procedere, ma i dati potrebbero non salvarsi.'
                );
            }
        }
    });
</script>
</body>
</html>
